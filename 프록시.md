# 프록시

프록시(proxy)는 대리인이라는 사전적 의미를 가지고 있다.   
스프링에서 프록시는 **CGLIB라는 라이브러리를 사용해 해당 클래스를 상속받은 새로운 인스턴스를(가짜 프록시 객체)
만들어내고 이 인스턴스가 클라이언트의 요청을 대신 받는 역할을 한다.**

   

   
     

![image](https://user-images.githubusercontent.com/108853290/185791542-ddd798a7-d783-4f98-8c10-4841d081efa6.png)   
* CGLIB라는 라이브러리로 해당 클래스를 상속 받은 가짜 프록시 객체를 만들어서 주입한다.
* 객체를 만들 때 `@Scope` 어노테이션을 사용해 프록시 객체를 만들 수 있다.
* 클래스가 아닌 인터페이스라면 `ScopedProxyMode.INTERFACE`를 사용한다.
* **프록시 객체는 요청이 오면 그 때 내부에서 진짜 빈을 요청**하는 로직이 들어있다.
* 프록시 객체는 원본 클래스를 상속 받아서 만들어졌기 때문에 이 객체를 사용하는 클라이언트 입장에서는 동일하게 사용되어진다.


  
![image](https://user-images.githubusercontent.com/108853290/185791352-350d98eb-850e-447e-b371-363f1f84c8b4.png)   
![image](https://user-images.githubusercontent.com/108853290/185791480-a24038bb-5aa3-4d85-b8c5-394c95c98b3e.png)   

프록시로 등록해 놓고 해당 객체를 의존성 주입을 받았다.   
그리고 해당 객체의 타입을 출력해보면 원래 타입이 아닌 CGLIB가 붙은 어떠한 다른 객체가 출력되는걸 볼 수 있다.
원래 클래스를 상속받은 프록시 객체인것이다.     


프록시 객체는 요청이 오면 그 때 진짜 빈을 요청하기 때문에 **객체 생성 시점을 미뤄놓을 수 있다**.

