
# 싱글톤 패턴
  
> 웹 어플리케이션의 특성상 고객 요청이 굉장히 많은데 이런 요청들에 필요한 객체를 요청마다 생성하게 된다면 메모리 낭비가 심하다.  
> 이런 문제점을 해결하고자 객체를 하나만 만들어서 공유하도록 하는방법이 있다.   
> 요청이 100이면 100개를 만드는것이 아닌 **하나의 인스턴스를 가지고 공유하는것**이다.   
> 참고로 **객체를 생성하는것보다 참조로 가져오는것이 훨씬! 효율적**이다.   
    
    
  
### 싱글톤 패턴이란 클래스의 인스턴스가 딱 1개만 생성되는 것을 보장하는 디자인 패턴이다. ###   
때문에 private 생성자를 사용해 외부에서 `new`로 생성하지 못하게 막아야 한다.


```java
public class SingletonService {

    private static final SingletonService instance = new SingletonService();    //static 영역에 미리 인스턴스를 생성해서 올려둔다.

    public static SingletonService getInstance() {    //외부에서 생성할 수 없으므로 해당 인스턴스는 가져와서 사용해야한다.
        return instance;
    }

    private SingletonService() {   //생성자를 private으로 만들어 외부에서 생성하지 못하도록, 참조값이 담긴 인스턴스를 불러와 공유할 수 있게만 한다.
    }
}
```  

![image](https://user-images.githubusercontent.com/108853290/183298322-2e1f2cec-865c-4a43-8a5f-c62b2d16ac58.png)   
싱글톤이 적용된 객체를 불러오면 같은 인스턴스가 불러와지는것을 확인할 수 있다.  

### 싱글톤 패던의 장점 ###
이렇게 하나의 인스턴스를 사용하게 되면   
* 단 한번의 생성으로 **static영역에 올려 사용**하기 때문에 **메모리 낭비를 막을 수 있고**
* static영역에 올라간 객체여서(=전역) **여러 다른 인스턴스들이 데이터를 공유하기 쉽다**.
* 객체 생성보다 참조로 가져오는것이 **시간적인 면에서도 이점**을 가지게 된다.

--------------------------------------------------------------------------
  
하지만 메모리와 속도면에서의 이점에도 불구하고 문제점을 가지고 있다.   
  

### 싱글톤 패턴의 문제점 ### 

* 위의 코드처럼 싱글톤 패턴을 구현하는 코드 차제가 많이 들어간다.
* 처음 생성시에 어떠한 구체 클래스에 new를 적용해야 하므로 구체클래스에 의존하게 되어DIP를 위반하고
* 때문에 OCP도 위반할 가능성이 높다.
* 인스턴스를 미리 생성해놓고 올려두기 때문에 (static) 테스가 어렵고
* 내부 속성을 변경하거나 초기화 하기 어렵다.
* 결론적으로 유연성이 떨어진다.
  
  
하지만!!
스프링 컨테이너는 이런 문제점들을 해결해준다
